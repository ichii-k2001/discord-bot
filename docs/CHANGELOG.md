# 変更履歴

## v2.3.2 - 2025-01-15

### 🔧 機能改善
- **翻訳機能のユーザビリティ向上**: より使いやすい翻訳体験を提供
  - 詳細表示時に翻訳結果のコピー用テキストを追加送信
  - シンプル表示でも使用制限が10回を切った場合に警告表示
  - 言語コード直接入力対応（ja, en, zh-CN等）
  - 選択肢形式「🇯🇵 日本語 (ja)」と直接入力「ja」の両方に対応

### 📝 ドキュメント更新
- README.md: 翻訳機能の使用例と特徴を新機能に対応
- general.py: helpコマンドの翻訳機能説明を更新
- ARCHITECTURE.md: 翻訳機能の改善点を反映
- SEQUENCE_DIAGRAMS.md: 言語コード処理フローを追加

### 🎯 変更の背景
- ユーザーからの要望に基づく使いやすさの向上
- 翻訳結果のコピー作業の簡素化
- 使用制限への早期警告による利便性向上
- より直感的な言語選択方法の提供

---

## v2.3.1 - 2025-01-15

### 🐛 バグ修正
- **中国語翻訳エラー修正**: Google翻訳API互換性向上
  - 言語コードを `zh-cn` → `zh-CN`, `zh-tw` → `zh-TW` に変更
  - 翻訳API呼び出し時の "invalid destination language" エラー解決

### 🔧 機能改善
- **翻訳コマンドUI改善**: より直感的なコマンド実行
  - 選択肢表示: `🇯🇵 日本語 (ja)` 形式を維持
  - 実際のコマンド: `/translate language:ja text:hello` 形式で実行
  - 大文字小文字を正確に保持する言語コード処理

### 📝 ドキュメント更新
- README.md: 中国語言語コード表記の統一
- SEQUENCE_DIAGRAMS.md: シーケンス図内の言語コード更新
- ARCHITECTURE.md: アーキテクチャ図の言語リスト更新

## v2.3.0 - 2025-01-21

### 🎉 新機能
- **翻訳機能の言語拡張**: 中国語と韓国語の対応を強化
  - 中国語を簡体字（zh-CN）と繁体字（zh-TW）に分離
  - 韓国語（ko）を新規追加
  - 従来のzhコードを削除し、より正確な言語指定に対応

### 🔧 機能改善
- **言語選択UI改善**: Discord app_commandsの選択肢機能を実装
  - 言語コード入力時に候補が表示される
  - 国旗と言語名付きの分かりやすい選択肢
  - 従来の手動入力も引き続き対応

### 🐛 バグ修正
- **中国語翻訳エラー修正**: "invalid destination language"エラーの解決
  - より具体的な言語コード（zh-CN, zh-TW）の使用
  - googletransライブラリとの互換性向上

### 📝 ドキュメント更新
- `README.md`: 対応言語表と使用例を更新
- `app/cogs/general.py`: helpコマンドの言語一覧を更新
- 翻訳機能の特徴説明に言語選択候補機能を追加

### 🎯 変更の背景
- 中国語圏ユーザーの利便性向上（簡体字・繁体字の明確な区別）
- 韓国語ユーザーへの対応拡大
- より直感的な言語選択インターフェースの提供

---

## v2.2.1 - 2025-01-21

### 🔧 機能改善
- **翻訳機能の出力形式変更**: チャット会話重視の設計に変更
  - デフォルトで翻訳結果のみをプレーンテキスト表示
  - `show_details` オプション追加で詳細情報表示可能
  - 自然な会話を重視した出力形式に最適化

### 📝 ドキュメント更新
- `README.md`: 翻訳機能の使用例を新形式に更新
- `docs/SEQUENCE_DIAGRAMS.md`: 翻訳機能のシーケンス図を更新
- 翻訳機能ヘルプの説明文を新機能に対応

### 🎯 変更の背景
- 別言語利用者との自然なチャット会話を促進
- 必要に応じて詳細情報も確認できる柔軟な設計
- ユーザビリティの向上

---

## v2.2.0 - 2025-01-21

### ⚠️ 一時的な機能無効化
- **カレンダー機能**: Google Calendar連携設定作業中のため一時的に無効化
- **タスク管理機能**: Google Sheets連携設定作業中のため一時的に無効化

### 🔧 変更内容
- `app/bot.py`: カレンダーとタスクのCog読み込みをコメントアウト
- `/help`コマンド: 実装予定機能として表示するよう更新
- ドキュメント更新: README.md、FEATURES.mdに実装予定の旨を記載

### 📋 現在利用可能な機能
- **スプラトゥーン機能**: 全機能利用可能
- **QRコード機能**: 全機能利用可能
- **基本機能**: `/help`、`/ping`コマンド

### 🎯 今後の予定
- Google Calendar連携設定完了後にカレンダー機能を再有効化
- Google Sheets連携設定完了後にタスク管理機能を再有効化

---

## v2.1.0 - 2025-01-21

### 🎉 新機能
- **QRコード生成機能**: 独立したCogとして実装
  - `/qr <テキスト>` - テキストやURLをQRコードに変換
  - `/qr_help` - QRコード機能のヘルプ
  - 生成者情報と生成時刻を記録

### 🔧 機能簡素化
- **プライバシー機能削除**: 複雑性を減らすため、ユーザー別フィルタリング機能を削除
- **Google連携前提**: ローカルモードとGoogle連携のハイブリッド運用からGoogle連携前提に変更
- **ファイル削除**: 
  - `app/services/user_settings.py` - ユーザー設定管理サービス
  - `app/cogs/user_management.py` - プライバシー管理Cog
  - `docs/PRIVACY_MANAGEMENT.md` - プライバシー管理ドキュメント

### 📋 削除されたコマンド
- `/privacy_mode` - プライバシーモード設定
- `/privacy_status` - プライバシー設定確認

### 🎯 設計方針の変更
- **シンプル化**: 機能を絞り込み、使いやすさを重視
- **Google連携推奨**: クラウド同期を前提とした設計
- **保守性向上**: 複雑な機能を削除し、メンテナンスを容易に

---

## v2.0.0 - 2025-01-21

### 🎉 新機能
- **Googleカレンダー連携**: Discord上で追加した予定がGoogleカレンダーに自動同期
- **Googleスプレッドシート連携**: タスク管理をGoogleスプレッドシートで行う機能
- **プライバシー管理**: ユーザー別の共有/プライベートモード切り替え
- **ユーザー設定管理**: 個人設定の永続化

### 🔧 技術的改善
- **サービス層の追加**: Google連携とユーザー設定を独立したサービスとして分離
- **ハイブリッドデータ管理**: ローカルJSONファイルとGoogle連携の自動切り替え
- **Cogベース設計**: 機能別の完全分離とモジュール化

### 📋 新しいコマンド
- `/calendar_sync` - Googleカレンダー連携状態確認
- `/task_sync` - Googleスプレッドシート連携状態確認
- `/privacy_mode` - プライバシーモード設定
- `/privacy_status` - プライバシー設定確認

### 🗂️ ファイル構成変更
- `app/services/` ディレクトリの追加
- `docs/` ディレクトリの整理
- 不要な `__init__.py` ファイルの削除（Koyeb最適化）

### 📚 ドキュメント
- Google連携セットアップガイドの追加
- プライバシー管理ガイドの追加
- 機能詳細ガイドの大幅更新

---

## v1.1.0 - 2025-01-20

### 🎉 新機能
- **カレンダー機能**: 予定の追加、表示、削除
- **タスク管理機能**: タスクの追加、完了、期限管理
- **優先度管理**: 高/中/低の優先度設定

### 🔧 改善
- 機能別Cogへの分離
- データファイルの整理

---

## v1.0.0 - 2025-01-19

### 🎉 初回リリース
- **スプラトゥーン機能**: チーム編成、ブキ検索
- **Koyebデプロイ対応**: 24時間稼働
- **FastAPI統合**: Webサーバー機能

### 📋 基本コマンド
- `/splatoon_team` - チーム編成
- `/splatoon_weapon` - ブキ情報検索
- `/splatoon_role` - ロール別ブキ一覧
- `/splatoon_help` - ヘルプ表示