# プライバシー管理ガイド

## 🎯 概要

Discord Botでは、カレンダーとタスク管理機能において、**共有モード**と**プライベートモード**を選択できます。

## 🔄 動作モード

### 🌐 共有モード（デフォルト）
- **対象**: サーバー内の全ユーザー
- **データ共有**: 全員が追加したデータを見ることができる
- **編集権限**: 全員が他人のデータも編集・削除可能
- **用途**: チーム作業、プロジェクト管理

### 🔒 プライベートモード
- **対象**: 個人のみ
- **データ表示**: 自分が作成したデータのみ表示
- **編集権限**: 自分のデータのみ編集・削除可能
- **用途**: 個人的なタスク管理、プライベートな予定

## 🔧 設定方法

### プライバシーモードの変更

```bash
# カレンダーをプライベートモードに設定
/privacy_mode private calendar

# タスクを共有モードに設定
/privacy_mode shared tasks

# すべての機能をプライベートモードに設定
/privacy_mode private all
```

### 現在の設定確認

```bash
# 現在のプライバシー設定を確認
/privacy_status
```

## 📊 機能別の動作

### 📅 カレンダー機能

#### 共有モード
- `/calendar_list` - 全員の予定を表示
- `/calendar_today` - 全員の今日の予定を表示
- 誰でも予定の追加・削除が可能

#### プライベートモード
- `/calendar_list` - 自分の予定のみ表示
- `/calendar_today` - 自分の今日の予定のみ表示
- 自分の予定のみ管理可能

### 📋 タスク管理機能

#### 共有モード
- `/task_list` - 全員のタスクを表示
- `/task_due` - 全員の期限が近いタスクを表示
- 誰でもタスクの完了・削除が可能

#### プライベートモード
- `/task_list` - 自分のタスクのみ表示
- `/task_due` - 自分の期限が近いタスクのみ表示
- 自分のタスクのみ管理可能

## 🔍 データの識別

### 作成者情報
すべてのデータには作成者情報が記録されます：
- **Discord ユーザーID**: データの作成者を識別
- **作成日時**: データが作成された日時
- **サーバー別管理**: サーバーごとに設定が分離

### フィルタリング
プライベートモードでは、以下の条件でデータをフィルタリング：
- `created_by` フィールドが自分のユーザーIDと一致するもののみ表示

## 🌐 Google連携との関係

### Googleカレンダー連携
- **共有モード**: 1つのGoogleカレンダーを全員で共有
- **プライベートモード**: 表示は個人のみだが、実際のGoogleカレンダーは共有
- **注意**: Googleカレンダー上では全データが見える

### Googleスプレッドシート連携
- **共有モード**: 1つのスプレッドシートを全員で共有
- **プライベートモード**: 表示は個人のみだが、実際のスプレッドシートは共有
- **注意**: スプレッドシート上では全データが見える

## ⚠️ 重要な注意事項

### 完全なプライバシー保護ではない
- **Discord上**: プライベートモードで個人データのみ表示
- **Google上**: 実際のカレンダー・スプレッドシートでは全データが見える
- **管理者**: サーバー管理者は設定に関係なく全データにアクセス可能

### データの削除
- プライベートモードでも、他人が作成したデータは削除できません
- 共有モードでは、誰でも任意のデータを削除できます

## 🔧 設定の管理

### サーバー別設定
- 各Discordサーバーごとに個別の設定
- DMでの使用時は専用の設定

### 設定の永続化
- 設定は `data/user_settings.json` に保存
- サーバー移行時は設定の再設定が必要

### デフォルト設定
- 新規ユーザー: 共有モード
- 設定変更後: 変更した設定を維持

## 💡 使用例

### チーム作業の場合
```bash
# チーム全体でタスクを共有
/privacy_mode shared tasks

# 個人の予定はプライベートに
/privacy_mode private calendar
```

### 個人利用の場合
```bash
# すべて個人専用に設定
/privacy_mode private all
```

### 混在利用の場合
```bash
# タスクは共有、カレンダーは個人
/privacy_mode shared tasks
/privacy_mode private calendar
```

## 🔍 トラブルシューティング

### よくある問題

**Q: プライベートモードにしたのに他人のデータが見える**
A: 以下を確認してください：
- `/privacy_status` で設定を確認
- 設定変更後にコマンドを再実行
- キャッシュの問題の場合はBotの再起動

**Q: 共有モードで自分のデータしか見えない**
A: 以下を確認してください：
- 他のユーザーがデータを作成しているか
- Google連携が正しく動作しているか

**Q: 設定が保存されない**
A: 以下を確認してください：
- `data/` ディレクトリの書き込み権限
- ディスク容量の確認

## 📞 サポート

設定に関する問題は、GitHubのIssuesで報告してください。